<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Legislative Bill Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Source+Serif+4:opsz,wght@8..60,500;8..60,700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #f7f7f4;
      --ink: #1f2328;
      --muted: #5c6470;
      --card: #ffffff;
      --line: #d8d9d4;
      --accent: #2f6f68;
      --support: #1f7a5e;
      --oppose: #b04a3a;
      --neutral: #6b7280;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "IBM Plex Sans", sans-serif;
      color: var(--ink);
      background:
        radial-gradient(800px 500px at 10% 10%, rgba(47, 111, 104, 0.08), transparent 60%),
        radial-gradient(700px 450px at 90% 0%, rgba(31, 122, 94, 0.06), transparent 55%),
        var(--bg);
      min-height: 100vh;
    }

    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3rem 1.5rem 4rem;
    }

    header {
      display: grid;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    h1 {
      font-family: "Source Serif 4", serif;
      font-size: clamp(2rem, 3vw, 2.6rem);
      letter-spacing: 0.01em;
    }

    .subtitle {
      color: var(--muted);
      font-size: 1rem;
      max-width: 56ch;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem 1.5rem;
      align-items: center;
      margin: 1.5rem 0 2rem;
      padding: 1rem 1.25rem;
      border: 1px solid var(--line);
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(6px);
    }

    .counts {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .count-pill {
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: #fff;
    }

    .filters {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      border: 1px solid var(--line);
      background: #fff;
      color: var(--muted);
      padding: 0.4rem 0.85rem;
      border-radius: 999px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .filter-btn.active,
    .filter-btn:hover {
      color: var(--ink);
      border-color: var(--accent);
      box-shadow: 0 6px 14px rgba(31, 35, 40, 0.08);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.25rem;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 1.25rem;
      display: grid;
      gap: 0.75rem;
      box-shadow: 0 10px 30px rgba(25, 28, 32, 0.08);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
      align-items: baseline;
    }

    .bill-id {
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--ink);
    }

    .author {
      color: var(--muted);
      font-size: 0.9rem;
    }

    .meta {
      display: grid;
      gap: 0.5rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .meta strong {
      color: var(--ink);
      font-weight: 600;
    }

    .badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .badge {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      font-size: 0.75rem;
      border: 1px solid var(--line);
      color: var(--muted);
      background: #fafafa;
    }

    .badge.support {
      color: var(--support);
      border-color: rgba(31, 122, 94, 0.35);
      background: rgba(31, 122, 94, 0.08);
    }

    .badge.oppose {
      color: var(--oppose);
      border-color: rgba(176, 74, 58, 0.35);
      background: rgba(176, 74, 58, 0.08);
    }

    .badge.neutral {
      color: var(--neutral);
    }

    details {
      border-top: 1px solid var(--line);
      padding-top: 0.75rem;
      color: var(--muted);
      font-size: 0.9rem;
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--ink);
      margin-bottom: 0.5rem;
    }

    .status {
      text-transform: capitalize;
    }

    .empty {
      padding: 2rem;
      text-align: center;
      color: var(--muted);
      border: 1px dashed var(--line);
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.6);
    }

    @media (max-width: 720px) {
      .controls {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Legislative Bill Dashboard</h1>
      <p class="subtitle">
        Daily calendar overview for office review. Each card includes committee votes, fiscal
        note flags, and caucus/TCC/TFR positions for quick decision support.
      </p>
    </header>

    <section class="controls">
      <div class="counts" id="counts"></div>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="support">Caucus Support</button>
        <button class="filter-btn" data-filter="oppose">Caucus Oppose</button>
      </div>
    </section>

    <section>
      <div id="grid" class="grid"></div>
      <div id="empty" class="empty" hidden>No bills match this filter.</div>
    </section>
  </div>

  <script>
    const INLINE_CSV = ",,https://capitol.texas.gov/Calendars/CalendarsByLegislature.aspx?Chbr=H,Go to extentions. Press Apps Script Press Run. Allow all permssions.,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\n,,,,,,,\\n,,,,,,,\\n,,https://capitol.texas.gov/tlodocs/89R/calendars/html/H220250528.htm,,,,,\\nPage 1,,,,,,,\\nMajor State Calendar Senate Bills Third Reading,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 15,Bettencourt,\\\"Land and Resource Management\\n 6-0-0-3\\n Absent: Davis Y, Hinojosa, Lalani\\\",None,Neutral,Support,,\\\"Support: 4 Constituents, Texas Appleseed, AFP, Amazon, Lumbermen's Association, Libre, Dallas Housing Coalition\\nOpposed: 2 Constituents\\\"\\nGeneral State Calendar Senate Bills Third Reading,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 646,West,\\\"Higher Education  \\n 9-2-0-0  \\n No: Shofner, Tinderholt\\\",None,Oppose  ,Oppose,Oppose,Support: Texas Association of Community Health Centers\\nSB 800,Zaffirini,\\\"Higher Education\\n 11-0-0-0\\\",None,Oppose,Neutral,,\\nSB 790,Alvarado,\\\"Natural Resources\\n 8-0-0-5\\n Absent: Martinez, Fairly, Josey Garcia, Romero, Villalobos\\\",None,Support ,Support,,\\nSB 748,Zaffirini,\\\"Licensing & Administrative Procedures\\n 10-0-0-3\\n Absent: Gerdes, Geren, Romero\\\",None,Support,Support,,\\nSB 571,Bettencourt,\\\"Public Education\\n 11-1-0-3\\n No: Hinojosa\\n Absent: Dutton, Kerwin, Talarico\\\",Yes,Support,Support,,\\nSB 1957,Hagenbuch,\\\"Intergovernmental Affairs\\n 6-4-0-1\\n No: Zwiener, Cole, Garcia Hernandez, Rosenthal\\n Absent: Cortez\\\",None,Support,Support,,\\nSB 1923,West,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Support,Support,,\\nSB 1896,Huffman,\\\"Criminal Jurisprudence\\n 10-0-0-1\\n Absent: Little\\\",None,Support,Support,,\\nPage 2,,,,,,,\\nSB 1760,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Support,Support,,\\nSB 1335,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Support,Support,,\\nSB 2368,Campbell,\\\"State Affairs\\n 15-0-0-0\\\",None,Support,Support,Support,\\nSB 2477,Bettencourt,\\\"Land & Resource Management\\n 6-0-0-3\\n Absent: Lalani, Hinojosa, Hunter\\\",None,Neutral,Support,Support,Support: AFP \\nSB 2587,Zaffirini,\\\"Homeland Security\\n 6-0-0-5\\n Absent: Lopez R, Cortez, Hickland, Holt, Pierson\\\",None,Neutral,Support,,\\nSB 2986,Campbell,\\\"State Affairs\\n 13-0-0-2\\n Absent: Guillen, Smithee\\\",None,Support,Support,,\\nSB 2965,Creighton,\\\"Land & Resource Management\\n 6-0-0-3\\n Absent: Lalani, Hinojosa, Hunter\\\",None,Neutral,Support,,\\\"Support: Fire Chiefs, State Association of Fire and Emergency Districts, State Association of Fire Fighters\\\"\\nSB 1563,Men\\u00e9ndez,\\\"Intergovernmental Affairs\\n 9-2-0-0\\n No: Leo Wilson, Tepper\\\",None,Neutral,Oppose,,\\nSB 1467,\\\"Hinojosa, Juan \\\"\\\"Chuy\\\"\\\"\\\",\\\"Public Health\\n 12-0-0-1\\n Absent: Olcott\\\",Yes,Neutral,Support,,\\nSB 1164,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Neutral,Neutral,,\\nSB 1137,Miles,\\\"Human Services\\n 7-0-0-4\\n Absent: Aicha Davis, Rose, Schatzline, Swanson\\\",None,Neutral,Neutral/amend,,\\nSB 614,\\\"Hinojosa, Juan \\\"\\\"Chuy\\\"\\\"\\\",\\\"Criminal Jurisprudence\\n 9-1-0-1\\n No: Virdell\\n Absent: Wu\\\",None,Neutral,Support,,\\nPage 3,,,,,,,\\nSB 705,Zaffirini,\\\"Licensing & Administrative Procedures\\n 9-0-0-4\\n Absent: Gerdes, Geren, McQueeney, Romero\\\",None,Neutral,Neutral,,\\nSB 918,Zaffirini,\\\"Public Health\\n 12-0-0-1\\n Absent: Olcott\\\",None,Neutral,Neutral,,\\nSB 955,Parker,\\\"Criminal Jurisprudence\\n 11-0-0-0\\\",None,Support,Support,,\\nSB 869,Birdwell,\\\"State Affairs\\n 13-0-0-2\\n Absent: Guillen, Smithee\\\",Yes,Support,Support,Support,\\nSB 850,Middleton,\\\"Ways & Means\\n 11-0-0-2\\n Absent: Gervin Hawkins, Vasut\\\",None,Support,Support,Support,\\nSB 863,Perry,\\\"Natural Resources\\n 9-0-0-4\\n Absent: Martinez, Fairly, Romero, Villalobos\\\",None,Neutral,Support,,\\nSB 1055,Nichols,\\\"Natural Resources\\n 8-0-0-5\\n Absent: Martinez, Fairly, Josey Garcia, Romero, Villalobos\\\",None,Neutral,Neutral,,\\nSB 2206,Bettencourt,\\\"Ways & Means\\n 12-0-0-1\\n Absent: Bernal\\\",Yes,Neutral,Support,Support/Amend,\\\"Support: Manufacturing Caucus, Texans for Innovation, TAB, TTARA, Manufacturers, TXOGA, Chemistry Council, Dallas Regional Chamber, North Texas, TEDC\\\"\\nSB 457,Kolkhorst,\\\"Human Services\\n 6-1-0-4\\n No: Richardson\\n Absent: Aicha Davis, Rose, Schatzline, Swanson\\\",Yes,Neutral,Support,Oppose,\\nSB 2337,Hughes,\\\"Trade, Workforce & Economic Development\\n 6-2-1-2\\n No: Talarico, Meza\\n PNV: Button\\n Absent: Bhojani, Ordaz\\\",None,Support,Support,,\\\"Support: TAB, TXOGA, Manufacturers, TLR, Civil Justice League\\\"\\nSB 1610,Perry,\\\"Corrections\\n 5-0-0-4\\n Absent: Venton Jones, Lowe, Lozano, Wharton\\\",None,Support,Support,,\\nSB 1362,Hughes,\\\"Criminal Jurisprudence\\n 6-5-0-0\\n No: Wu, Bowers, Jolanda Jones, Moody, Rodriquez Ramos\\\",None,Support,Support,Support,\\nSB 926,Hancock,\\\"Insurance\\n 8-0-0-1\\n Absent: Vo\\\",None,Support,Support,,\\\"Support: AFP, TAB, TX2036, Libre, TCCRI, TAHO, Business Leadership Council\\\"\\nPage 4,,,,,,,\\nSB 1494,Johnson,\\\"Elections\\n 8-0-0-1\\n Absent: Bucy\\\",None,Neutral,Support,,\\nSB 251,Flores,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Neutral,Support,,\\nSB 456,Middleton,\\\"Criminal Jurisprudence\\n 9-0-0-2\\n Absent: Bowers, Moody\\\",None,Support,Support,,\\nSB 500,Sparks,\\\"Human Services\\n 7-0-0-4\\n Absent: Aicha Davis, Rose, Schatzline, Swanson\\\",None,Neutral,Support,Support,\\nSB 1307,Cook,\\\"Insurance\\n 7-0-0-2\\n Absent: Jessica Gonzalez, Goodwin\\\",None,Oppose,Neutral,,\\nSB 2615,Creighton,\\\"Higher Education\\n 7-3-0-1\\n No: Aicha Davis, Perez, Ward Johnson\\n Absent: Lalani\\\",None,Support,Support,Support,\\nSB 2995,West,\\\"Higher Education\\n 11-0-0-0\\\",None,Oppose,Neutral,,\\nSB 2321,King,\\\"Environmental Regulation\\n 5-0-0-4\\n Absent: Anchia, Morales Shaw, Oliverson, Reynolds\\\",None,Support,Support,Support/Amend,\\nSB 2972,Creighton,\\\"Higher Education\\n 6-5-0-0\\n No: Howard, Aicha Davis, Lalani, Perez, Ward Johnson\\\",None,Support,Support,,Opposed: 1 constituent\\nSB 973,Eckhardt,\\\"Ways & Means\\n 10-2-0-1\\n No: Troxclair, Vasut\\n Absent: Bernal\\\",None,Oppose,Neutral,,\\nSB 865,Alvarado,\\\"Public Education\\n 10-2-1-2\\n No: Frank, Schoolcraft\\n PNV: Leo Wilson\\n Absent: Hunter, Talarico\\\",None,Oppose,Neutral,,\\nSB 506,Bettencourt,\\\"Elections\\n 6-2-0-1\\n No: Bucy, Morales Shaw\\n Absent: Plesa\\\",None,Support,Support,Support,\\nSB 1522,Perry,\\\"Human Services\\n 7-0-0-4\\n Absent: Davis, Rose, Schatzline, Swanson\\\",None,Neutral,Support,,\\nPage 5,,,,,,,\\nSB 1558,Perry,\\\"Judiciary & Civil Jurisprudence\\n 6-5-0-0\\n No: Dutton, Flores, Gonzalez J, Johnson, Moody\\\",None,Support,Support,,\\nSB 510,Bettencourt,\\\"Elections\\n 7-1-0-1\\n No: Bucy\\n Absent: Plesa\\\",None,Support,Support,,\\nSB 667,Hughes,\\\"State Affairs\\n 12-3-0-0\\n No: Hernandez, Thompson, Turner\\\",None,Support,Support,Support,\\nSB 763,Alvarado,\\\"Environmental Regulation\\n 7-0-0-2\\n Absent: Bumgarner, Reynolds\\\",None,Neutral,Neutral,,\\nSB 2073,Zaffirini,\\\"Ways & Means\\n 12-0-0-1\\n Absent: Bernal\\\",None,Neutral,Neutral/amend,Oppose,\\nSB 1858,Hagenbuch,\\\"Homeland Security\\n 7-2-0-2\\n No: Dorazio, Pierson\\n Absent: Canales, Cortez\\\",None,Support,Support,,\\nSB 1660,Huffman,\\\"Criminal Jurisprudence\\n 6-3-0-2\\n No: Jones J, Rodriguez Ramos, Wu\\n Absent: Bowers, Moody\\\",None,Support,Support,,\\nSB 2900,Kolkhorst,\\\"Ways & Means\\n 9-0-0-4\\n Absent: Bernal, Gervin-Hawkins, Martinez Fischer, Noble\\\",None,Support,Support,Support,\\nSB 1433,Bettencourt,\\\"State Affairs\\n 9-6-0-0\\n No: Anchia, Davis Y, Hernandez, Raymond, Thompson, Turner\\\",None,Support,Support,,\\nSB 1540,Bettencourt,\\\"DOGE\\n 11-0-0-2\\n Absent: Bowers, Olcott\\\",None,Support,Neutral,,\\nSB 1964,Parker,\\\"DOGE\\n 11-0-0-2\\n Absent: Bowers, Olcott\\\",Yes,Neutral,Support,,\\nSB 1300,Flores,\\\"Criminal Jurisprudence\\n 8-3-0-0\\n No: Wu, Jolanda Jones, Rodriguez Ramos\\\",None,Support,Support,,Support: Texas Retailers Association\\nPage 6,,,,,,,\\nSB 1644,Schwertner,\\\"Insurance\\n 8-0-0-1\\n Absent: Vo\\\",None,Support,Neutral,,\\nSB 2217,Hughes,\\\"Elections\\n 8-0-0-1\\n Absent: Plesa\\\",None,Support,Support,Support,\\nSB 2373,Johnson,\\\"DOGE\\n 11-0-0-2\\n Absent: Bowers, Olcott\\\",None,Support,Support,,\\nSB 2431,Campbell,\\\"Higher Education\\n 10-1-0-0\\n No: Tinderholt\\\",None,Oppose,Neutral,,\\nSB 1758,Birdwell,\\\"Environmental Regulation\\n 8-0-0-1\\n Absent: Morales Shaw\\\",Yes,Support,Neutral,,\\nSB 974,Eckhardt,\\\"Ways & Means\\n 10-2-0-1\\n No: Troxclair, Vasut\\n Absent: Bernal\\\",None,Oppose,Oppose,,\\nSB 2480,Campbell,\\\"Public Health\\n 9-0-1-3\\n PNV: Jones J\\n Absent: Collier, Johnson, Simmons\\\",None,Support,Support,,\\nSB 3039,West,\\\"Higher Education\\n 10-1-0-0\\n No: Tinderholt\\\",None,Neutral,Support,,\\nSB 3047,Zaffirini,\\\"Intergovernmental Affairs\\n 9-1-1-0\\n No: Lowe\\n PNV: Leo Wilson\\\",None,Neutral,Neutral,,\\nSB 2781,Birdwell,\\\"State Affairs\\n 12-2-0-1\\n No: Anchia, Raymond\\n Absent: Guillen\\\",None,Support,Neutral,,\\nSB 826,Parker,\\\"Criminal Jurisprudence\\n 9-0-0-2\\n Absent: Bowers, Moody\\\",None,Support,Support,,\\nSB 766,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Neutral,Support,,\\nPage 7,,,,,,,\\nSB 527,Schwertner,\\\"Insurance\\n 7-0-0-2\\n Absent: Gonzalez J, Goodwin\\\",None,Neutral,Neutral,,\\\"Support: Society of Anesthesiologists, Academy of Pediatric Dentistry, Dental Association\\\"\\nSB 1946,Zaffirini,\\\"Homeland Security\\n 6-4-0-1\\n No: Dorazio, Holt, Isaac, Pierson\\n Absent: Canales\\\",None,Neutral,Oppose,,\\nSB 2885,Flores,\\\"Natural Resources\\n 9-0-0-4\\n Absent: Ashby, Garcia J, Gonzalez M, Romero\\\",None,Neutral,Neutral,,\\nSB 1243,Birdwell,\\\"Natural Resources\\n 9-0-0-4\\n Absent: Ashby, Garcia J, Gonzalez M, Romero\\\",None,Support,Support,,\\nSB 2610,Blanco,\\\"DOGE\\n 9-2-0-2\\n No: Cook, Tinderholt\\n Absent: Bowers, Olcott\\\",None,Support,Neutral,,\\nSB 857,Schwertner,\\\"Homeland Security\\n 8-3-0-0\\n No: Cortez, Dorazio, Lopez R\\\",None,Support,Support,Oppose/Amend,\\nSB 2501,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 11-0-0-0\\\",None,Support,Support,,\\nSB 66,Zaffirini,\\\"Judiciary & Civil Jurisprudence\\n 10-0-0-1\\n Absent: LaHood\\\",None,Neutral,Support,,\\nSB 268,Perry,\\\"Public Health\\n 9-0-0-4\\n Absent: Bucy, Johnson, Olcott, Simmons\\\",None,Support,Support,,Opposed: Texas Medical Association\\nSB 331,Kolkhorst,\\\"Public Health\\n 11-0-0-2\\n Absent: Bucy, Collier\\\",None,Neutral,Support,,Support: AFP\\nPostponed Business Until 6:30 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 1302,Kolkhorst,\\\"Natural Resources\\n 9-0-0-4\\n Absent: Fairly, Martinez, Romero, Villalobos\\\",None,Support,Neutral,,\\nPage 8,,,,,,,\\nPostponed Business Until 7:00 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 519,Middleton,\\\"Culture, Recreation, and Tourism\\n 9-0-0-0\\\",None,Neutral,Neutral,,\\nPostponed Business Until 7:30 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 2807,Hagenbuch,\\\"Judiciary and Civil Jurisprudence\\n 6-5-0-0\\n No: Dutton, Flores, Gonzalez, Johnson, Moody\\\",None,Support,Support,,\\nPage 9,,,,,,,\\nPostponed Business Until 8:00 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 13,Paxton,\\\"Public Education\\n 8-4-0-3\\n No: Allen, Bernal, Bryant, Hinojosa\\n Absent: Dutton, Kerwin, Talarico\\\",None,Support,Support,Support,\\nSB 7,Perry,\\\"Natural Resources \\n 10-0-0-3 \\n Absent: Barry, Garcia J, Gonzalez M\\\",Yes,Support ,Support,Support,Support: Farm Bureau\\nSB 1718,Sparks,\\\"Culture, Recreation & Tourism\\n 8-5-0-2\\n No: Anchia, Davis Y, Hernandez, Thompson, Turner\\n Absent: Guillen, Smithee\\\",None,Neutral,Oppose,Oppose,\\nSB 1567,Bettencourt,\\\"Land & Resource Management\\n 5-1-0-3\\n No: Lopez R\\n Absent: Davis Y, Hinojosa, Hunter\\\",None,Neutral,Support,Support/Amend,\\nSB 1233,Hancock,\\\"Public Health\\n 7-4-0-2\\n No: Bucy, Collier, Johnson, Simmons\\n Absent: Campos, Jones J\\\",None,Support,Support,Support,\\\"Support: 1 Constituent, \\nSupport and Oppose Amendments: Texas Right to Life, Texas Alliance for Life\\\"\\nSB 413,Middleton,\\\"Public Education\\n 12-0-0-3\\n Absent: Dutton, Kerwin, Talarico\\\",None,Support,Support,,\\nSB 2177,Hagenbuch,\\\"Homeland Security\\n 9-0-0-2\\n Absent: Canales, Cortez\\\",None,Support,Support,,\\nPostponed Business Until 8:01 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 30,Schwertner,\\\"Judiciary & Civil Jurisprudence\\n 7-4-0-0\\n No: Dutton, Flores, Gonzalez J, Johnson\\\",None,Support,Support,,\\\"Support: Farm Bureau, 3 Constituents, TLR\\nOpposed: 9 Constituents\\\"\\nPostponed Business Until 9:00 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSB 2024,Perry,\\\"Public Health\\n 12-0-0-1\\n Absent: Olcott\\\",None,Support,Support,,\\\"Support: TMA, Vapor Technology Association\\\"\\nPage 10,,,,,,,\\nSJR 1,Huffman,\\\"Criminal Justice\\nAyes=6, Nays=0, Absent=1\\\",None,Support,Support,Support,\\nPostponed Business Until 10:00 Am,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSCR 27,Eckhardt,\\\"Culture, Recreation & Tourism\\nAyes=6, Nays=0, Absent=3\\\",None,Neutral,,,\\nSB 2018,Paxton,\\\"Ways & Means\\n 9-3-0-1\\n No: Gervin-Hawkin, Martinez Fischer, Perez\\n Absent: Bernal\\\",Yes,Neutral,Support,Support,\\nSB 1580,Blanco,\\\"Public Health\\n 12-0-0-1\\n Absent: Olcott\\\",None,Support,Neutral,,\\nSB 2121,Johnson,\\\"Trade, Workforce, Economic Development\\n 9-0-0-2\\n Absent: Bhojani, Longoria\\\",None,Neutral,Support,,\\nSB 1049,King,\\\"Public Education\\n 11-1-0-3\\n No: Bryant\\n Absent: Dutton, Kerwin, Talarico\\\",None,Neutral,Support,Support,\\nSB 1266,Alvarado,\\\"Human Services\\n 7-0-0-4\\n Absent: Davis A, Rose, Schatzline, Swanson\\\",None,Neutral,Support,,\\nSB 1400,Kolkhorst,\\\"Higher Education\\n 8-2-0-1\\n No: Shofner. Tinderholt\\n Absent: Lalani\\\",None,Neutral,Neutral,,\\nSB 1596,Hagenbuch,\\\"Homeland Security\\n 8-2-0-1\\n No: Canales, Lopez R\\n Absent: Cortez\\\",None,Support,Support,Support,Support: 4 Constituents\\nSB 2753,Hall,\\\"Elections\\n 8-0-0-1\\n Absent: Plesa\\\",None,Support,Support,Support,\\nSB 2221,Parker,\\\"Trade, Workforce & Economic Development\\n 9-0-0-2\\n Absent: Bhojani, Longoria\\\",Yes,Support,Support,,Support: TAB\\nSB 1719,Hughes,\\\"Judiciary & Civil Jurisprudence\\n 6-5-0-0\\n No: Johnson, Dutton, Moody, Jessica Gonzalez, Flores\\\",None,Neutral,Support,,\\nPage 11,,,,,,,\\nResolutions Calendar Senate Resolutions,,,,,,,\\nBill,Author,Committee Votes,Fiscal,Caucus,TCC,TFR,Notes\\nSCR 9,Hughes,\\\"State Affairs\\n 9-5-0-1\\n No: Hernandez, Anchia, Yvonne Davis, Thompson, Turner\\n Absent: Smithee\\\",None,Support,,,";
    const CSV_PATH = "/Users/graysongrabois/Downloads/05.28 Floor - Sheet1.csv";
    const BILL_RE = /^(SB|HB|HR|SR|HJR|SJR|SCR|HCR)\s*\d+/i;

    const countsEl = document.getElementById("counts");
    const gridEl = document.getElementById("grid");
    const emptyEl = document.getElementById("empty");
    const filterButtons = Array.from(document.querySelectorAll(".filter-btn"));

    function parseCSV(text) {
      const rows = [];
      let row = [];
      let field = "";
      let inQuotes = false;

      for (let i = 0; i < text.length; i += 1) {
        const char = text[i];
        const next = text[i + 1];

        if (inQuotes) {
          if (char === "\"" && next === "\"") {
            field += "\"";
            i += 1;
          } else if (char === "\"") {
            inQuotes = false;
          } else {
            field += char;
          }
        } else {
          if (char === "\"") {
            inQuotes = true;
          } else if (char === ",") {
            row.push(field);
            field = "";
          } else if (char === "\n") {
            row.push(field);
            rows.push(row);
            row = [];
            field = "";
          } else if (char !== "\r") {
            field += char;
          }
        }
      }
      if (field.length || row.length) {
        row.push(field);
        rows.push(row);
      }
      return rows;
    }

    function cleanStatus(value) {
      if (!value) return "";
      return value.replace(/\s+/g, " ").trim();
    }

    function statusClass(status) {
      const lower = status.toLowerCase();
      if (lower.includes("support")) return "support";
      if (lower.includes("oppose")) return "oppose";
      return "neutral";
    }

    function escapeHTML(value) {
      return value
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }

    function formatMultiline(text) {
      return escapeHTML(text).replace(/\n/g, "<br>");
    }

    function buildCard(bill) {
      const card = document.createElement("article");
      card.className = "card";
      card.dataset.caucus = bill.caucusClass;

      const header = document.createElement("div");
      header.className = "card-header";
      header.innerHTML = `
        <div>
          <div class="bill-id">${escapeHTML(bill.bill)}</div>
          <div class="author">${escapeHTML(bill.author)}</div>
        </div>
      `;

      const badges = document.createElement("div");
      badges.className = "badges";
      badges.innerHTML = `
        <span class="badge ${bill.caucusClass}">Caucus: <span class="status">${escapeHTML(bill.caucus || "Not set")}</span></span>
        <span class="badge ${statusClass(bill.tcc)}">TCC: <span class="status">${escapeHTML(bill.tcc || "Not set")}</span></span>
        <span class="badge ${statusClass(bill.tfr)}">TFR: <span class="status">${escapeHTML(bill.tfr || "Not set")}</span></span>
        <span class="badge ${bill.fiscal ? "support" : "neutral"}">Fiscal: ${bill.fiscal || "None"}</span>
      `;

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.innerHTML = `
        <div><strong>Committee Votes</strong><br>${formatMultiline(bill.committeeVotes || "—")}</div>
      `;

      card.appendChild(header);
      card.appendChild(badges);
      card.appendChild(meta);

      if (bill.notes) {
        const details = document.createElement("details");
        details.innerHTML = `
          <summary>Notes & endorsements</summary>
          <div>${formatMultiline(bill.notes)}</div>
        `;
        card.appendChild(details);
      }

      return card;
    }

    function renderCounts(data) {
      const total = data.length;
      const support = data.filter((item) => item.caucusClass === "support").length;
      const oppose = data.filter((item) => item.caucusClass === "oppose").length;
      const neutral = total - support - oppose;

      countsEl.innerHTML = `
        <span class="count-pill">Total: ${total}</span>
        <span class="count-pill">Support: ${support}</span>
        <span class="count-pill">Oppose: ${oppose}</span>
        <span class="count-pill">Neutral: ${neutral}</span>
      `;
    }

    function applyFilter(filter, data) {
      const cards = Array.from(gridEl.children);
      let visibleCount = 0;

      cards.forEach((card, index) => {
        const matches =
          filter === "all" || card.dataset.caucus === filter;
        card.hidden = !matches;
        if (matches) visibleCount += 1;
      });

      emptyEl.hidden = visibleCount !== 0;
    }

    function initFilters(data) {
      filterButtons.forEach((button) => {
        button.addEventListener("click", () => {
          filterButtons.forEach((btn) => btn.classList.remove("active"));
          button.classList.add("active");
          applyFilter(button.dataset.filter, data);
        });
      });
    }

    async function init() {
      const text = INLINE_CSV || (await (await fetch(CSV_PATH)).text());
      const rows = parseCSV(text);

      const headerIndex = rows.findIndex((row) => (row[0] || "").trim() === "Bill");
      if (headerIndex === -1) {
        gridEl.innerHTML = "<div class=\"empty\">Header row not found in CSV.</div>";
        return;
      }

      const headers = rows[headerIndex].map((value) => value.trim());
      const data = [];

      for (let i = headerIndex + 1; i < rows.length; i += 1) {
        const row = rows[i];
        const billId = (row[0] || "").trim();

        if (!billId || billId === "Bill" || billId.startsWith("Page") || !BILL_RE.test(billId)) {
          continue;
        }

        const record = {};
        headers.forEach((header, index) => {
          record[header] = (row[index] || "").trim();
        });

        const caucus = cleanStatus(record.Caucus);
        data.push({
          bill: record.Bill || billId,
          author: record.Author || "—",
          committeeVotes: record["Committee Votes"] || "",
          fiscal: record.Fiscal || "",
          caucus,
          caucusClass: statusClass(caucus),
          tcc: cleanStatus(record.TCC),
          tfr: cleanStatus(record.TFR),
          notes: record.Notes || "",
        });
      }

      renderCounts(data);
      initFilters(data);
      gridEl.innerHTML = "";

      data.forEach((bill) => {
        gridEl.appendChild(buildCard(bill));
      });

      applyFilter("all", data);
    }

    init().catch(() => {
      gridEl.innerHTML = "<div class=\"empty\">Unable to load CSV data.</div>";
    });
  </script>
</body>
</html>
